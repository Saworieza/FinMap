webpackJsonp([5],{118:function(e,t,s){function n(e){return s(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./af":124,"./af.js":124,"./ar":128,"./ar-ma":125,"./ar-ma.js":125,"./ar-sa":126,"./ar-sa.js":126,"./ar-tn":127,"./ar-tn.js":127,"./ar.js":128,"./az":129,"./az.js":129,"./be":130,"./be.js":130,"./bg":131,"./bg.js":131,"./bn":132,"./bn.js":132,"./bo":133,"./bo.js":133,"./br":134,"./br.js":134,"./bs":135,"./bs.js":135,"./ca":136,"./ca.js":136,"./cs":137,"./cs.js":137,"./cv":138,"./cv.js":138,"./cy":139,"./cy.js":139,"./da":140,"./da.js":140,"./de":142,"./de-at":141,"./de-at.js":141,"./de.js":142,"./el":143,"./el.js":143,"./en-au":144,"./en-au.js":144,"./en-ca":145,"./en-ca.js":145,"./en-gb":146,"./en-gb.js":146,"./eo":147,"./eo.js":147,"./es":148,"./es.js":148,"./et":149,"./et.js":149,"./eu":150,"./eu.js":150,"./fa":151,"./fa.js":151,"./fi":152,"./fi.js":152,"./fo":153,"./fo.js":153,"./fr":155,"./fr-ca":154,"./fr-ca.js":154,"./fr.js":155,"./fy":156,"./fy.js":156,"./gl":157,"./gl.js":157,"./he":158,"./he.js":158,"./hi":159,"./hi.js":159,"./hr":160,"./hr.js":160,"./hu":161,"./hu.js":161,"./hy-am":162,"./hy-am.js":162,"./id":163,"./id.js":163,"./is":164,"./is.js":164,"./it":165,"./it.js":165,"./ja":166,"./ja.js":166,"./jv":167,"./jv.js":167,"./ka":168,"./ka.js":168,"./km":169,"./km.js":169,"./ko":170,"./ko.js":170,"./lb":171,"./lb.js":171,"./lt":172,"./lt.js":172,"./lv":173,"./lv.js":173,"./me":174,"./me.js":174,"./mk":175,"./mk.js":175,"./ml":176,"./ml.js":176,"./mr":177,"./mr.js":177,"./ms":179,"./ms-my":178,"./ms-my.js":178,"./ms.js":179,"./my":180,"./my.js":180,"./nb":181,"./nb.js":181,"./ne":182,"./ne.js":182,"./nl":183,"./nl.js":183,"./nn":184,"./nn.js":184,"./pl":185,"./pl.js":185,"./pt":187,"./pt-br":186,"./pt-br.js":186,"./pt.js":187,"./ro":188,"./ro.js":188,"./ru":189,"./ru.js":189,"./si":190,"./si.js":190,"./sk":191,"./sk.js":191,"./sl":192,"./sl.js":192,"./sq":193,"./sq.js":193,"./sr":195,"./sr-cyrl":194,"./sr-cyrl.js":194,"./sr.js":195,"./sv":196,"./sv.js":196,"./ta":197,"./ta.js":197,"./th":198,"./th.js":198,"./tl-ph":199,"./tl-ph.js":199,"./tr":200,"./tr.js":200,"./tzl":201,"./tzl.js":201,"./tzm":203,"./tzm-latn":202,"./tzm-latn.js":202,"./tzm.js":203,"./uk":204,"./uk.js":204,"./uz":205,"./uz.js":205,"./vi":206,"./vi.js":206,"./zh-cn":207,"./zh-cn.js":207,"./zh-tw":208,"./zh-tw.js":208};n.keys=function(){return Object.keys(r)},n.resolve=o,e.exports=n,n.id=118},1301:function(e,t,s){var n,o=s(0),r=s(509),i=o.keys(r),a=["category","choropleth"],l={trackLegends:function(e){n={},o.each(e.models,function(e){var t,s={};null!=e.legends&&(t=e.legends,o.each(i,function(e){var n=t[e];!0===n.get("visible")&&(s[e]=n)}),n[e.id]=s)})},getLegends:function(){return n},updateLegends:function(e){var t=n[e];o.each(a,function(e){var s=t[e];s&&s.set({visible:!1})})},resetLegends:function(e){var t=n[e];o.each(t,function(e){e.set({visible:!0})})}};e.exports=l},1307:function(e,t,s){var n=s(290),o=s(985),r=s(984),i=s(0),a=s(117),l=window.vizJSON,d=i.findWhere(l.overlays,{type:"logo"}),c={no_cdn:!1,cartodb_logo:void 0!==d,renderMenu:l.options.dashboard_menu,share_urls:!0,authToken:window.authTokens,layerSelectorEnabled:!0,mapzenApiKey:window.mapzenApiKey},u=window.stateJSON,j=window.layersData,h=a.getStateFromCurrentURL();h&&!i.isEmpty(h)?i.extend(c,{state:h}):u&&"{}"!==u&&i.extend(c,{state:u});var y=new o;y.resetByLayersData(j),n.createDashboard("#dashboard",l,c,function(e,t){e&&console.error("Dashboard has some errors:",e);var s=t.getMap().map,n=l.options.scrollwheel,o=n?"enableScrollWheel":"disableScrollWheel";s&&s[o]&&s[o]();var i=new r({deepInsightsDashboard:t,layerStyleCollection:y});window.embedIntegrations=i}),window.layerStyleCollection=y},316:function(e,t){function s(e){throw new Error("Cannot find module '"+e+"'.")}s.keys=function(){return[]},s.resolve=s,e.exports=s,s.id=316},509:function(e,t){var s={bubble:{legendType:"size"},category:{legendType:"color"},choropleth:{legendType:"color"},custom:{legendType:"color"},custom_choropleth:{legendType:"color"}};e.exports=s},6:function(e,t,s){var n=s(0);e.exports=function(e,t,s){if(void 0===t)throw new Error("Opts are required");n.each(t,function(t){if(void 0===e[t])throw new Error(t+" is required");s["_"+t]=e[t]},s)}},815:function(e,t){function s(e){throw new Error("Cannot find module '"+e+"'.")}s.keys=function(){return[]},s.resolve=s,e.exports=s,s.id=815},818:function(e,t){},984:function(e,t,s){var n=s(6),o=s(1301),r=["deepInsightsDashboard","layerStyleCollection"],i=function(e){n(e,r,this),this._getWidgets().each(function(e){this._bindWidgetChanges(e)},this),o.trackLegends(this._getLayers())};i.prototype._bindWidgetChanges=function(e){e.bind("change:hasInitialState",function(e){e.bind("change:autoStyle",this._onWidgetAutoStyleChanged,this),e.isAutoStyle()&&(e.dataviewModel.layer.get("initialStyle")?this._onWidgetAutoStyleChanged(e):e.dataviewModel.layer.once("change:initialStyle",function(){this._onWidgetAutoStyleChanged(e)},this))},this)},i.prototype._onWidgetAutoStyleChanged=function(e){var t,s=this._getWidgets().any(function(e){return e.isAutoStyle()},this),n=e.isAutoStyle(),r=e.dataviewModel.layer.id;n?(o.updateLegends(r),t=this._layerStyleCollection.findById(r),e.dataviewModel.layer&&(e.dataviewModel.layer.attributes.initialStyle=t.get("cartocss"))):s||o.resetLegends(r)},i.prototype._getLayer=function(e){return this.visMap().getLayerById(e.id)},i.prototype._getLayers=function(e){return this.visMap().layers},i.prototype.visMap=function(){return this._vis().map},i.prototype._getWidgets=function(e){return this._deepInsightsDashboard._dashboard.widgets._widgetsCollection},i.prototype._vis=function(){return this._deepInsightsDashboard.getMap()},e.exports=i},985:function(e,t,s){var n=s(1);e.exports=n.Collection.extend({model:function(e,t){var s={};return s.id=e.id,e.options.tile_style&&(s.cartocss=e.options.tile_style),new n.Model(s)},resetByLayersData:function(e){this.reset(e,{silent:!0})},findById:function(e){return this.findWhere({id:e})}})}},[1307]);
//# sourceMappingURL=builder_embed.js.map